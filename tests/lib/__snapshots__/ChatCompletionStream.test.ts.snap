// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`.stream() emits content logprobs events 1`] = `
"data: {"id":"chatcmpl-9tZXFsqeQOozn5YU8I6SbjkmDnN76","object":"chat.completion.chunk","created":1723031665,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"role":"assistant","content":"","refusal":null},"logprobs":{"content":[],"refusal":null},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXFsqeQOozn5YU8I6SbjkmDnN76","object":"chat.completion.chunk","created":1723031665,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"{\\""},"logprobs":{"content":[{"token":"{\\"","logprob":-0.0036115935,"bytes":[123,34],"top_logprobs":[]}],"refusal":null},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXFsqeQOozn5YU8I6SbjkmDnN76","object":"chat.completion.chunk","created":1723031665,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"city"},"logprobs":{"content":[{"token":"city","logprob":-8.418666e-6,"bytes":[99,105,116,121],"top_logprobs":[]}],"refusal":null},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXFsqeQOozn5YU8I6SbjkmDnN76","object":"chat.completion.chunk","created":1723031665,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"\\":\\""},"logprobs":{"content":[{"token":"\\":\\"","logprob":-0.00034666734,"bytes":[34,58,34],"top_logprobs":[]}],"refusal":null},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXFsqeQOozn5YU8I6SbjkmDnN76","object":"chat.completion.chunk","created":1723031665,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"San"},"logprobs":{"content":[{"token":"San","logprob":-0.013863761,"bytes":[83,97,110],"top_logprobs":[]}],"refusal":null},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXFsqeQOozn5YU8I6SbjkmDnN76","object":"chat.completion.chunk","created":1723031665,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":" Francisco"},"logprobs":{"content":[{"token":" Francisco","logprob":-0.00003190179,"bytes":[32,70,114,97,110,99,105,115,99,111],"top_logprobs":[]}],"refusal":null},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXFsqeQOozn5YU8I6SbjkmDnN76","object":"chat.completion.chunk","created":1723031665,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"\\",\\""},"logprobs":{"content":[{"token":"\\",\\"","logprob":-0.03384693,"bytes":[34,44,34],"top_logprobs":[]}],"refusal":null},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXFsqeQOozn5YU8I6SbjkmDnN76","object":"chat.completion.chunk","created":1723031665,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"units"},"logprobs":{"content":[{"token":"units","logprob":-1.2664457e-6,"bytes":[117,110,105,116,115],"top_logprobs":[]}],"refusal":null},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXFsqeQOozn5YU8I6SbjkmDnN76","object":"chat.completion.chunk","created":1723031665,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"\\":\\""},"logprobs":{"content":[{"token":"\\":\\"","logprob":-0.000031305768,"bytes":[34,58,34],"top_logprobs":[]}],"refusal":null},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXFsqeQOozn5YU8I6SbjkmDnN76","object":"chat.completion.chunk","created":1723031665,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"f"},"logprobs":{"content":[{"token":"f","logprob":-0.5759394,"bytes":[102],"top_logprobs":[]}],"refusal":null},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXFsqeQOozn5YU8I6SbjkmDnN76","object":"chat.completion.chunk","created":1723031665,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"\\"}"},"logprobs":{"content":[{"token":"\\"}","logprob":-0.0000420341,"bytes":[34,125],"top_logprobs":[]}],"refusal":null},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXFsqeQOozn5YU8I6SbjkmDnN76","object":"chat.completion.chunk","created":1723031665,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{},"logprobs":null,"finish_reason":"stop"}]}

data: {"id":"chatcmpl-9tZXFsqeQOozn5YU8I6SbjkmDnN76","object":"chat.completion.chunk","created":1723031665,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[],"usage":{"prompt_tokens":17,"completion_tokens":10,"total_tokens":27}}

data: [DONE]

"
`;

exports[`.stream() emits refusal logprobs events 1`] = `
"data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{"role":"assistant","content":null,"refusal":""},"logprobs":{"content":null,"refusal":[]},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{"refusal":"I'm"},"logprobs":{"content":null,"refusal":[{"token":"I'm","logprob":-0.0020705638,"bytes":[73,39,109],"top_logprobs":[]}]},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{"refusal":" very"},"logprobs":{"content":null,"refusal":[{"token":" very","logprob":-0.60976714,"bytes":[32,118,101,114,121],"top_logprobs":[]}]},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{"refusal":" sorry"},"logprobs":{"content":null,"refusal":[{"token":" sorry","logprob":-8.180258e-6,"bytes":[32,115,111,114,114,121],"top_logprobs":[]}]},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{"refusal":","},"logprobs":{"content":null,"refusal":[{"token":",","logprob":-0.000040603656,"bytes":[44],"top_logprobs":[]}]},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{"refusal":" but"},"logprobs":{"content":null,"refusal":[{"token":" but","logprob":-0.048603047,"bytes":[32,98,117,116],"top_logprobs":[]}]},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{"refusal":" I"},"logprobs":{"content":null,"refusal":[{"token":" I","logprob":-0.003929745,"bytes":[32,73],"top_logprobs":[]}]},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{"refusal":" can't"},"logprobs":{"content":null,"refusal":[{"token":" can't","logprob":-0.012669391,"bytes":[32,99,97,110,39,116],"top_logprobs":[]}]},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{"refusal":" assist"},"logprobs":{"content":null,"refusal":[{"token":" assist","logprob":-0.0036209812,"bytes":[32,97,115,115,105,115,116],"top_logprobs":[]}]},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{"refusal":" with"},"logprobs":{"content":null,"refusal":[{"token":" with","logprob":-0.0052407524,"bytes":[32,119,105,116,104],"top_logprobs":[]}]},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{"refusal":" that"},"logprobs":{"content":null,"refusal":[{"token":" that","logprob":-0.0029618926,"bytes":[32,116,104,97,116],"top_logprobs":[]}]},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{"refusal":" request"},"logprobs":{"content":null,"refusal":[{"token":" request","logprob":-1.7024335,"bytes":[32,114,101,113,117,101,115,116],"top_logprobs":[]}]},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{"refusal":"."},"logprobs":{"content":null,"refusal":[{"token":".","logprob":-2.6968896e-6,"bytes":[46],"top_logprobs":[]}]},"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[{"index":0,"delta":{},"logprobs":null,"finish_reason":"stop"}]}

data: {"id":"chatcmpl-9tZXGacdbmJYO8K50haE4OauaJmPn","object":"chat.completion.chunk","created":1723031666,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_2a322c9ffc","choices":[],"usage":{"prompt_tokens":17,"completion_tokens":13,"total_tokens":30}}

data: [DONE]

"
`;

exports[`.stream() works 1`] = `
"data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"role":"assistant","content":"","refusal":null},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"{\\""},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"city"},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"\\":\\""},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"San"},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":" Francisco"},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"\\",\\""},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"units"},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"\\":\\""},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"c"},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"\\"}"},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{},"logprobs":null,"finish_reason":"stop"}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[],"usage":{"prompt_tokens":17,"completion_tokens":10,"total_tokens":27}}

data: [DONE]

"
`;

exports[`.stream() is robust against leading newline chunks 1`] = `
"data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"role":"assistant","content":"","refusal":null},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"\\n\\n"},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"{\\""},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"city"},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"\\":\\""},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"San"},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":" Francisco"},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"\\",\\""},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"units"},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"\\":\\""},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"c"},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{"content":"\\"}"},"logprobs":null,"finish_reason":null}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[{"index":0,"delta":{},"logprobs":null,"finish_reason":"stop"}]}

data: {"id":"chatcmpl-9tZXEmwtoDf6vqCqEWSvDP8jx9OXe","object":"chat.completion.chunk","created":1723031664,"model":"gpt-4o-2024-08-06","system_fingerprint":"fp_845eaabc1f","choices":[],"usage":{"prompt_tokens":17,"completion_tokens":10,"total_tokens":27}}

data: [DONE]

"
`;
